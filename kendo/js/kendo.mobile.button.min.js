/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.userevents.min"],e)}(function(){return function(e,t){function n(t,n,i){e(n.target).closest(".km-button,.km-detail").toggleClass("km-state-active",i),c&&t.deactivateTimeoutID&&(clearTimeout(t.deactivateTimeoutID),t.deactivateTimeoutID=0)}function i(t){return e('<span class="km-badge">'+t+"</span>")}var r=window.kendo,a=r.mobile,o=a.ui,s=o.Widget,l=r.support,u=l.mobileOS,c=u.android&&u.flatVersion>=300,d="click",f="disabled",p="km-state-disabled",h=s.extend({init:function(e,t){var i=this;s.fn.init.call(i,e,t),i._wrap(),i._style(),i.options.enable=i.options.enable&&!i.element.attr(f),i.enable(i.options.enable),i._userEvents=new r.UserEvents(i.element,{press:function(e){i._activate(e)},tap:function(e){i._release(e)},release:function(e){n(i,e,!1)}}),c&&i.element.on("move",function(e){i._timeoutDeactivate(e)})},destroy:function(){s.fn.destroy.call(this),this._userEvents.destroy()},events:[d],options:{name:"Button",icon:"",style:"",badge:"",enable:!0},badge:function(e){var t=this.badgeElement=this.badgeElement||i(e).appendTo(this.element);return e||0===e?(t.html(e),this):e===!1?(t.empty().remove(),this.badgeElement=!1,this):t.html()},enable:function(e){var n=this.element;t===e&&(e=!0),this.options.enable=e,e?n.removeAttr(f):n.attr(f,f),n.toggleClass(p,!e)},_timeoutDeactivate:function(e){this.deactivateTimeoutID||(this.deactivateTimeoutID=setTimeout(n,500,this,e,!1))},_activate:function(e){var t=document.activeElement,i=t?t.nodeName:"";this.options.enable&&(n(this,e,!0),("INPUT"==i||"TEXTAREA"==i)&&t.blur())},_release:function(n){var i=this;if(!(n.which>1))return i.options.enable?(i.trigger(d,{target:e(n.target),button:i.element})&&n.preventDefault(),t):(n.preventDefault(),t)},_style:function(){var t,n=this.options.style,i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-"+this)}))},_wrap:function(){var t=this,n=t.options.icon,r=t.options.badge,a='<span class="km-icon km-'+n,o=t.element.addClass("km-button"),s=o.children("span:not(.km-icon)").addClass("km-text"),l=o.find("img").addClass("km-image");!s[0]&&o.html()&&(s=o.wrapInner('<span class="km-text" />').children("span.km-text")),!l[0]&&n&&(s[0]||(a+=" km-notext"),t.iconElement=o.prepend(e(a+'" />'))),(r||0===r)&&(t.badgeElement=i(r).appendTo(o))}}),g=h.extend({options:{name:"BackButton",style:"back"},init:function(e,n){var i=this;h.fn.init.call(i,e,n),t===i.element.attr("href")&&i.element.attr("href","#:back")}}),m=h.extend({options:{name:"DetailButton",style:""},init:function(e,t){h.fn.init.call(this,e,t)},_style:function(){var t,n=this.options.style+" detail",i=this.element;n&&(t=n.split(" "),e.each(t,function(){i.addClass("km-"+this)}))},_wrap:function(){var t=this,n=t.options.icon,i='<span class="km-icon km-'+n,r=t.element,a=r.children("span"),o=r.find("img").addClass("km-image");!o[0]&&n&&(a[0]||(i+=" km-notext"),r.prepend(e(i+'" />')))}});o.plugin(h),o.plugin(g),o.plugin(m)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});