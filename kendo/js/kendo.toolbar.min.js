/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,define){define(["./kendo.core.min"],e)}(function(){return function(e,t){function n(n){var i=n.useButtonTag?e("<button></button>"):e("<a></a>");return i.data({type:"button"}),i.attr(j,n.uid),n.togglable&&(i.addClass(g),n.selected&&i.addClass(b)),n.enable===!1&&i.addClass(k),n.url===t||n.useButtonTag||(i.attr("href",n.url),n.mobile&&i.attr(u.attr("role"),"button")),n.group&&i.attr(u.attr("group"),n.group),!n.togglable&&n.click&&p(n.click)&&i.data("click",n.click),n.togglable&&n.toggle&&p(n.toggle)&&i.data("toggle",n.toggle),i}function i(e){var t,n=$.button.base(e);return n.addClass(h),e.primary&&n.addClass(C),e.align&&n.addClass("k-align-"+e.align),e.id&&n.attr("id",e.id),"overflow"!=e.showText&&e.text&&(e.mobile?n.html('<span class="km-text">'+e.text+"</span>"):n.text(e.text)),t="overflow"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&a(e,n),n}function r(e){var t,n=$.button.base(e);return n.addClass(m+" "+h),e.primary&&n.addClass(C),e.id&&n.attr("id",e.id+"_overflow"),"toolbar"!=e.showText&&e.text&&(e.mobile?n.html('<span class="km-text">'+e.text+"</span>"):n.text(e.text)),t="toolbar"!=e.showIcon&&(e.icon||e.spriteCssClass||e.imageUrl),t&&a(e,n),n}function a(t,n){var i,r,a,o=t.icon,s=t.spriteCssClass,l=t.imageUrl;(s||l||o)&&(i=!0,n.contents().not("span.k-sprite,span."+S+",img.k-image").each(function(t,n){(1==n.nodeType||3==n.nodeType&&e.trim(n.nodeValue).length>0)&&(i=!1)}),i?n.addClass(D):n.addClass(E)),o?(r=n.children("span."+S).first(),r[0]||(r=e('<span class="'+S+'"></span>').prependTo(n)),r.addClass(T+o)):s?(r=n.children("span.k-sprite").first(),r[0]||(r=e('<span class="k-sprite"></span>').prependTo(n)),r.addClass(s)):l&&(a=n.children("img.k-image").first(),a[0]||(a=e('<img alt="icon" class="k-image" />').prependTo(n)),a.attr("src",l))}function o(){var e,t=this.options.anchor,n=t.outerWidth();u.wrap(this.element).addClass("k-split-wrapper"),e="border-box"!==this.element.css("box-sizing")?n-(this.element.outerWidth()-this.element.width()):n,this.element.css({fontFamily:t.css("font-family"),"min-width":e})}function s(e){e.target.is(".k-toggle-button")||e.target.toggleClass(b,"press"==e.type)}function l(t){return t=e(t),t.hasClass("km-actionsheet")?t.closest(".km-popup-wrapper"):t.addClass("km-widget km-actionsheet").wrap('<div class="km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup"></div>').parent().wrap('<div class="km-popup-wrapper k-popup"></div>').parent()}var u=window.kendo,c=u.ui.Widget,d=e.proxy,p=u.isFunction,f="k-toolbar",h="k-button",m="k-overflow-button",g="k-toggle-button",v="k-button-group",_="k-split-button",w="k-toolbar-resizable",b="k-state-active",k="k-state-disabled",y="k-group-start",x="k-group-end",C="k-primary",S="k-icon",T="k-i-",D="k-button-icon",E="k-button-icontext",F="k-list-container k-split-container",P="k-split-button-arrow",I="k-overflow-anchor",A="k-overflow-container",M="k-toolbar-first-visible",z="k-toolbar-last-visible",H="click",O="toggle",B="open",V="close",N="overflowOpen",R="overflowClose",L="never",W="auto",U="always",q="k-overflow-hidden",j=u.attr("uid"),$={button:{base:n,toolbar:i,overflow:r},buttonGroup:{base:function(t,n,i){var r,a,o=t.buttons;for(i.data({type:"buttonGroup"}),i.attr(j,t.uid),a=0;o.length>a;a++)o[a].uid||(o[a].uid=u.guid()),r=n(e.extend({mobile:t.mobile},o[a])),r.appendTo(i);i.children().first().addClass(y),i.children().last().addClass(x)},toolbar:function(t){var n=e('<div class="'+v+'"></div>');return $.buttonGroup.base(t,$.button.toolbar,n),t.align&&n.addClass("k-align-"+t.align),t.id&&n.attr("id",t.id),n},overflow:function(t){var n=e('<li class="'+(t.mobile?"":v)+' k-overflow-group"></li>');return $.buttonGroup.base(t,$.button.overflow,n),t.id&&n.attr("id",t.id+"_overflow"),n}},splitButton:{toolbar:function(t){var n,i,r,a=e('<div class="'+_+'"></div>'),s=$.button.toolbar(t),u=e('<a class="'+h+" "+P+'"><span class="'+(t.mobile?"km-icon km-arrowdown":"k-icon k-i-arrow-s")+'"></span></a>'),c=e('<ul class="'+F+'"></ul>'),d=t.menuButtons;for(s.appendTo(a),u.appendTo(a),c.appendTo(a),r=0;d.length>r;r++)i=$.button.toolbar(e.extend({mobile:t.mobile,click:t.click},d[r])),i.wrap("<li></li>").parent().appendTo(c);return t.align&&a.addClass("k-align-"+t.align),t.id||(t.id=t.uid),a.attr("id",t.id+"_wrapper"),c.attr("id",t.id+"_optionlist").attr(j,t.rootUid),t.mobile&&(c=l(c)),n=c.kendoPopup({appendTo:t.mobile?e(t.mobile).children(".km-pane"):null,anchor:a,copyAnchorStyles:!1,animation:t.animation,open:o}).data("kendoPopup"),a.data({type:"splitButton",kendoPopup:n}),a.attr(j,t.uid),a},overflow:function(t){var n,i,r=e('<li class="'+_+'"></li>'),a=$.button.overflow(t),o=t.menuButtons;for(a.appendTo(r),i=0;o.length>i;i++)n=$.button.overflow(e.extend({mobile:t.mobile},o[i])),n.appendTo(r);return t.id&&r.attr("id",t.id+"_overflow"),r.data({type:"splitButton"}),r.attr(j,t.uid),r}},separator:{base:function(t,n){var i=n?e('<li class="k-separator">&nbsp;</li>'):e('<div class="k-separator">&nbsp;</div>');return i.data({type:"separator"}),i.attr(j,t.uid),i},toolbar:function(e){return $.separator.base(e,!1)},overflow:function(e){return $.separator.base(e,!0)}},overflowAnchor:'<div class="k-overflow-anchor"></div>',overflowContainer:'<ul class="k-overflow-container k-list-container"></ul>'},G=c.extend({init:function(t,n){var i,r=this;if(c.fn.init.call(r,t,n),n=r.options,t=r.wrapper=r.element,t.addClass(f+" k-widget"),this.uid=u.guid(),t.attr(j,this.uid),r.isMobile="boolean"==typeof n.mobile?n.mobile:r.element.closest(".km-root")[0],r.animation=r.isMobile?{open:{effects:"fade"}}:{},r.isMobile&&(t.addClass("km-widget"),S="km-icon",T="km-",h="km-button",v="km-buttongroup km-widget",b="km-state-active",k="km-state-disabled"),n.resizable?(r._renderOverflow(),t.addClass(w),r.overflowUserEvents=new u.UserEvents(r.element,{threshold:5,allowSelection:!0,filter:"."+I,tap:d(r._toggleOverflow,r)}),u.onResize(function(){r.resize()})):r.popup={element:e([])},n.items&&n.items.length)for(i=0;n.items.length>i;i++)r.add(n.items[i]);r.userEvents=new u.UserEvents(document,{threshold:5,allowSelection:!0,filter:"["+j+"="+this.uid+"] ."+h+", ["+j+"="+this.uid+"] ."+m,tap:d(r._buttonClick,r),press:s,release:s}),n.resizable&&this._toggleOverflowAnchor(),u.notify(r)},events:[H,O,B,V,N,R],options:{name:"ToolBar",items:[],resizable:!0,mobile:null},destroy:function(){var t=this;t.element.find("."+_).each(function(t,n){e(n).data("kendoPopup").destroy()}),t.userEvents.destroy(),t.options.resizable&&(t.overflowUserEvents.destroy(),t.popup.destroy()),c.fn.destroy.call(t)},add:function(t){var n,i,r=$[t.type],a=t.template,o=this,s=o.isMobile?"":"k-item k-state-default",l=t.overflowTemplate;e.extend(t,{uid:u.guid(),animation:o.animation,mobile:o.isMobile,rootUid:o.uid}),a&&!l&&(t.overflow=L),t.overflow!==L&&o.options.resizable&&(l?i=p(l)?e(l(t)):e(l):r&&(i=(r.overflow||e.noop)(t)),i&&i.length&&("LI"!==i.prop("tagName")&&(i.removeAttr(j),i=i.wrap("<li></li>").parent(),i.attr(j,t.uid)),o._attributes(i,t),i.addClass(s).appendTo(o.popup.container),i.data("overflow")===W&&i.addClass(q),o.angular("compile",function(){return{elements:i.get()}}))),t.overflow!==U&&(a?(n=p(a)?a(t):a,n instanceof jQuery||(n=e(n.replace(/^\s+|\s+$/g,""))),n=n.wrap("<div></div>").parent(),n.attr(j,t.uid)):r&&(n=(r.toolbar||e.noop)(t)),n&&n.length&&(o._attributes(n,t),o.options.resizable?(n.appendTo(o.element).css("visibility","hidden"),o._shrink(o.element.innerWidth()),n.css("visibility","visible")):n.appendTo(o.element),o.angular("compile",function(){return{elements:n.get()}})))},remove:function(e){{var t=this.element.find(e),n=t.data("type");t.attr(j)}t.parent("."+_).data("type")&&(n="splitButton",t=t.parent()),"splitButton"===n&&t.data("kendoPopup").destroy(),t.add(this.popup.element.find("["+j+"='"+t.attr(j)+"']")).remove()},enable:function(n,i){var r=this.element.find(n).attr(j);!r&&this.popup&&(r=this.popup.element.find(n).parent("li").attr(j)),t===i&&(i=!0),i?e("["+j+"='"+r+"']").removeClass(k):e("["+j+"='"+r+"']").addClass(k)},getSelectedFromGroup:function(e){return this.element.find("."+g+"[data-group='"+e+"']").filter("."+b)},toggle:function(t,n){var i,r=e(t),a=r.data("uid"),o=r.data("group");r.hasClass(g)&&(o&&this.element.add(this.popup.element).find("."+g+"[data-group='"+o+"']").filter("."+b).removeClass(b),e.contains(this.element[0],r[0])?(i=this.popup.element.find("["+j+"='"+a+"']"),"LI"===i.prop("tagName")&&(i=i.find("."+g+":first"))):(a=a?a:r.parent().data("uid"),i=this.element.find("["+j+"='"+a+"']")),r.add(i).toggleClass(b,n))},_attributes:function(e,t){e.attr(u.attr("overflow"),t.overflow||W)},_renderOverflow:function(){var t=this,n=$.overflowContainer;t.overflowAnchor=e($.overflowAnchor).addClass(h),t.element.append(t.overflowAnchor),t.isMobile?(t.overflowAnchor.append('<span class="km-icon km-more"></span>'),n=l(n)):t.overflowAnchor.append('<span class="k-icon k-i-more"></span>'),t.popup=new u.ui.Popup(n,{origin:"bottom right",position:"top right",anchor:t.overflowAnchor,animation:t.animation,appendTo:t.isMobile?e(t.isMobile).children(".km-pane"):null,copyAnchorStyles:!1,open:function(n){var i=u.wrap(t.popup.element).addClass("k-overflow-wrapper");t.isMobile?t.popup.container.css("max-height",parseFloat(e(".km-content:visible").innerHeight())-15+"px"):i.css("margin-left",(i.outerWidth()-i.width())/2+1),t.trigger(N)&&n.preventDefault()},close:function(e){t.trigger(R)&&e.preventDefault()}}),t.popup.container=t.isMobile?t.popup.element.find("."+A):t.popup.element,t.popup.container.attr(j,this.uid)},_toggleOverflowAnchor:function(){this.popup.element.children(":not(."+q+")").length>0?this.overflowAnchor.css({visibility:"visible",width:""}):this.overflowAnchor.css({visibility:"hidden",width:"1px"})},_buttonClick:function(n){var i,r,a,o,s,l,u,c,d,f=this;if(n.preventDefault(),r=e(n.target).closest("."+h,f.element),!r.hasClass(I)&&(!r.length&&f.popup&&(r=e(n.target).closest("."+m,f.popup.container)),o=r.hasClass(k),!o)){if(n.target.closest("."+P).length)return f._toggle(n),t;d=r.attr("id")?r.attr("id").replace(/(_overflow$)/,""):t,r.hasClass(g)?(l=r.data("group"),u=p(r.data("toggle"))?r.data("toggle"):null,f.toggle(r),s=r.hasClass(b),c={target:r,group:l,checked:s,id:d},u&&u.call(f,c),f.trigger(O,c)):(u=p(r.data("click"))?r.data("click"):null,c={target:r,id:d},u&&u.call(f,c),f.trigger(H,c)),r.hasClass(m)&&f.popup.close(),a=r.closest(".k-split-container"),a[0]&&(i=a.data("kendoPopup"),(i?i:a.parents(".km-popup-wrapper").data("kendoPopup")).close())}},_toggle:function(t){var n,i=e(t.target).closest("."+_),r=i.data("kendoPopup");t.preventDefault(),n=r.element.is(":visible")?this.trigger(V,{target:i}):this.trigger(B,{target:i}),n||r.toggle()},_toggleOverflow:function(){this.popup.toggle()},_resize:function(e){var t=e.width;this.popup.close(),this._shrink(t),this._stretch(t),this._markVisibles(),this._toggleOverflowAnchor()},_childrenWidth:function(){var t=0;return this.element.children(":visible").each(function(){t+=e(this).outerWidth(!0)}),Math.ceil(t)},_shrink:function(e){var t,n,i;if(e<this._childrenWidth())for(n=this.element.children(":visible:not([data-overflow='never'], ."+I+")"),i=n.length-1;i>=0&&(t=n.eq(i),!(e>this._childrenWidth()));i--)this._hideItem(t)},_stretch:function(e){var t,n,i;if(e>this._childrenWidth())for(n=this.element.children(":hidden"),i=0;n.length>i&&(t=n.eq(i),!(e<this._childrenWidth())&&this._showItem(t,e));i++);},_hideItem:function(e){e.hide(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").removeClass(q)},_showItem:function(e,t){return e.length&&t>this._childrenWidth()+e.outerWidth(!0)?(e.show(),this.popup&&this.popup.container.find(">li[data-uid='"+e.data("uid")+"']").addClass(q),!0):!1},_markVisibles:function(){var e=this.popup.container.children(),t=this.element.children(":not(.k-overflow-anchor)"),n=e.filter(":not(.k-overflow-hidden)"),i=t.filter(":visible");e.add(t).removeClass(M+" "+z),n.first().add(i.first()).addClass(M),n.last().add(i.last()).addClass(z)}});u.ui.plugin(G)}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(e,t){t()});